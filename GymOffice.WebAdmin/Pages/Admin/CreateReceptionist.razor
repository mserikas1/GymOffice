@page "/admin/create-receptionist"

<InputFile id="photoFile" OnChange="UploadPhoto" accept=".jpg, .jpeg, .png" hidden />
<EditForm Model="@model" OnValidSubmit="OnValidSubmit">
    <DataAnnotationsValidator />
    <MudGrid>
        <MudItem xs="12" sm="7">
            <MudCard Class="pa-5">
                <MudCardContent>
                    <MudText Typo="Typo.subtitle2" Class="pa-5">Add New Receptionist</MudText>
                    <MudTextField Label="First name" HelperText="Length from 2 to 20 characters"
                                  @bind-Value="model.FirstName" For="@(() => model.FirstName)" />
                    <MudTextField Label="First name" HelperText="Length from 2 to 20 characters"
                                  @bind-Value="model.LastName" For="@(() => model.LastName)" />
                    <MudTextField Label="Phone Number" Class="mt-3"
                                  @bind-Value="model.PhoneNumber" For="@(() => model.PhoneNumber)" />
                    <MudTextField Label="Email" Class="mt-3"
                                  @bind-Value="model.Email" For="@(() => model.Email)" />
                    <MudTextField Label="Passport" Class="mt-3"
                                  @bind-Value="model.PassportNumber" For="@(() => model.PassportNumber)" />
                    <MudTextField Label="Password" HelperText="Choose a strong password" Class="mt-3"
                                  @bind-Value="model.Password" For="@(() => model.Password)" InputType="InputType.Password" />
                    <MudTextField Label="Confirm Password" HelperText="Repeat the password" Class="mt-3"
                                  @bind-Value="model.PasswordConfirm" For="@(() => model.PasswordConfirm)" InputType="InputType.Password" />
                    <MudCardActions Class="mt-4">
                        <MudButton HtmlTag="label" Color="Color.Success" StartIcon="@Icons.Filled.PersonAdd"
                                   Variant="Variant.Filled" for="photoFile">Add Photo</MudButton>
                        <MudText Class="ms-3">(Optional. Up to 5 Mb .jpg, .jpeg or .png)</MudText>
                    </MudCardActions>
                    <MudDivider DividerType="DividerType.Middle" Class="mt-4"/>              
                </MudCardContent>
                <MudCardActions>
                    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Register</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
        <MudItem xs="12" sm="5">
            <MudPaper Class="pa-5 mud-height-full">
                <MudText Typo="Typo.subtitle2" Class="pa-5">Profile Photo:</MudText>
                @if (isLoading == true)
                {
                    <MudText Class="m-4">Uploading...</MudText>
                }
                else if (errorMessage != null)
                {
                    <MudText Class="m-4">@errorMessage</MudText>
                }
                else if (model.PhotoUrl != null)
                {
                    <MudImage Fluid="true" Src="@model.PhotoUrl" Alt="Photo" Elevation="25" Class="rounded-lg" />
                }
            </MudPaper>
        </MudItem>        
    </MudGrid>
</EditForm>
