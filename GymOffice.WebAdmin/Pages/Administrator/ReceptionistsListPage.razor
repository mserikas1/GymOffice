@page "/admin/receptionists"

@if (Receptionists == null && ErrorMessage == null)
{
    <MudText Typo="Typo.h6" Class="pa-5">Loading data...</MudText>
    <DisplaySpinner />
}
else if (ErrorMessage != null)
{
    <ErrorDisplay ErrorMessage="@ErrorMessage" ResetError="HandleResetError" />
}
else
{
    <ReceptionistSearchComponent SearchOptions="SearchOptions"
        HandleSearch_Click="HandleSearch"
        HandleResetSearch_Click="HandleResetSearch" />

    @*<MudTable Items="@Receptionists" Dense="true" Hover="true" Filter="new Func<Receptionist, bool>(FilterFunc1)">*@
    <MudTable Items="@Receptionists" Dense="true" Hover="true" Filter="new Func<Receptionist, bool>(FilterFunc1)">
        <ToolBarContent>
            <MudText Typo="Typo.h6">Receptionists</MudText>
            <MudSpacer />
            <MudTextField @bind-Value="searchString" Placeholder="Search" Adornment="Adornment.Start"
                AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
        </ToolBarContent>
        <HeaderContent>
            <MudTh><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<Receptionist, object>(x => x.FirstName)">First Name</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Receptionist, object>(x => x.LastName)">Last Name</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Receptionist, object>(x => x.Email)">Email</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Receptionist, object>(x => x.PhoneNumber)">Phone Number</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Receptionist, object>(x => x.IsActive)">Active</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel SortBy="new Func<Receptionist, object>(x => x.IsAtWork)">At Work</MudTableSortLabel></MudTh>
            <MudTh></MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="First Name">@context.FirstName</MudTd>
            <MudTd DataLabel="Last Name">@context.LastName</MudTd>
            <MudTd DataLabel="Email">@context.Email</MudTd>
            <MudTd DataLabel="Phone Number">@context.PhoneNumber</MudTd>
            <MudTd DataLabel="Active">@(context.IsActive == true ? "Yes" : "No")</MudTd>
            <MudTd DataLabel="At Work">@(context.IsAtWork == true ? "Yes" : "No")</MudTd>
            <MudTh>
                <MudIconButton Icon="@Icons.Material.Filled.Preview" Variant="Variant.Filled" Color="Color.Secondary"
                           Size="Size.Medium" Class="me-3" OnClick="(() => GoToPreview_Click(context))" />
                <MudIconButton Icon="@Icons.Material.Filled.Edit" Variant="Variant.Filled" Color="Color.Primary" 
                           Size="Size.Medium" OnClick="(() => EditReceptionist_Click(context))" />
            </MudTh>
        </RowTemplate>
        <PagerContent>
                <MudTablePager HorizontalAlignment="HorizontalAlignment.End" />
        </PagerContent>
    </MudTable>
    <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ma-6" OnClick="CreateReceptionist_Click">Create New</MudButton>
}
